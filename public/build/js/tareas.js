!function(){!async function(){try{const a="/api/tareas?token="+o(),n=await fetch(a),r=await n.json();e=r,t()}catch(e){console.log(e)}}();let e=[];function t(){!function(){const e=document.querySelector("#listado-tareas");for(;e.firstChild;)e.removeChild(e.firstChild)}();const t=document.querySelector("#listado-tareas");if(0===e.length){const e=document.createElement("li");return e.textContent="No hay tareas",e.classList.add("no-tareas"),void t.appendChild(e)}const a={0:"Pendiente",1:"Completo"};e.forEach(e=>{const{id:n,nombre:r,estado:c,proyectoId:d}=e,s=document.createElement("li");s.dataset.tareaId=n,s.classList.add("tarea");const i=document.createElement("p");i.textContent=r;const l=document.createElement("div");l.classList.add("opciones");const u=document.createElement("button");u.classList.add("estado-tarea",""+a[c].toLowerCase()),u.textContent=a[c],u.dataset.estadoTarea=c,u.ondblclick=()=>{!function(e){const t="1"===e.estado?"0":"1";e.estado=t,async function(e){const{estado:t,id:a,nombre:n,proyectoId:r}=e,c=new FormData;c.append("id",a),c.append("nombre",n),c.append("estado",t),c.append("proyectoId",o());try{const e="http://localhost:3000/api/tarea/actualizar",t=await fetch(e,{method:"POST",body:c});await t.json()}catch(e){console.log(e)}}(e)}({...e})};const m=document.createElement("button");m.classList.add("eliminar-tarea"),m.dataset.idTarea=n,m.textContent="Eliminar",l.appendChild(u),l.appendChild(m),s.appendChild(i),s.appendChild(l),t.appendChild(s)})}function a(e,t,a){const o=document.querySelector(".alertas");o&&o.remove();const n=document.createElement("div");n.classList.add("alertas",t),n.textContent=e,a.parentElement.insertBefore(n,a.nextElementSibling),setTimeout(()=>{n.remove()},2e3)}function o(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).token}document.querySelector("#agregar-tarea").addEventListener("click",(function(){const n=document.createElement("div");n.classList.add("modal"),n.innerHTML="\n            <form class='formulario nueva-tarea'>\n                <legend>Añade una nueva tarea</legend>\n                <div class='campo'>\n                    <label for='tarea'>Tarea</label>\n                    <input type='text' name='tarea' id='tarea' placeholder='Escribe Tu Tarea'>\n                </div>\n\n                <div class='opciones'>\n                    <input type='submit' class='submit-nueva-tarea' value='Añadir Tarea'>\n                    <button type='button' class='cerrar-modal'>Cancelar</button>\n                </div>\n            </form>\n        ",setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),document.querySelector("body").appendChild(n),n.addEventListener("click",r=>{if(r.preventDefault(),r.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{n.remove()},500)}r.target.classList.contains("submit-nueva-tarea")&&function(){const n=document.querySelector("#tarea").value.trim();if(""===n)return void a("El nombre de la tarea es obligatorio","error",document.querySelector(".formulario legend"));!async function(n){const r=new FormData;r.append("nombre",n),r.append("proyectoId",o());try{const o="http://localhost:3000/api/tarea",c=await fetch(o,{method:"POST",body:r}),d=await c.json();if(a(d.mensaje,d.tipo,document.querySelector(".formulario legend")),"exito"===d.tipo){const a=document.querySelector(".modal");setTimeout(()=>{a.remove()},2e3);const o={id:String(d.id),nombre:n,estado:"0",proyectoId:d.proyectoId};e=[...e,o],t()}}catch(e){console.log(e)}}(n)}()})}))}();
//# sourceMappingURL=tareas.js.map
